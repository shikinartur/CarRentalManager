# –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º (CarPermissions)

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–≥—Ä–∞–Ω—É–ª—è—Ä–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º —á–µ—Ä–µ–∑ –º–æ–¥–µ–ª—å `CarPermissions`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∏–±–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –¥–æ—Å—Ç—É–ø–æ–º —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º –∫–æ–º–ø–∞–Ω–∏–∏.

**–í–∞–∂–Ω–æ**: –ú–µ–Ω–µ–¥–∂–µ—Ä—ã (MANAGER) –æ—Ç–ª–∏—á–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞–±–æ—Ä–æ–º –ø—Ä–∞–≤ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏. –ù–µ—Ç –ø–æ–Ω—è—Ç–∏—è "–º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏" - –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏.

## üîê –¢–∏–ø—ã –ø—Ä–∞–≤

### 1. canView - –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥—Ä—É–∑–∫–∏
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
- **–ö—Ç–æ –º–æ–∂–µ—Ç –≤—ã–¥–∞—Ç—å**: –í–ª–∞–¥–µ–ª–µ—Ü –≥–∞—Ä–∞–∂–∞ –∏–ª–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- **–ö–æ–º—É**: –õ—é–±–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–∞–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –∞–≤—Ç–æ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏

### 2. canEditCar - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª—è
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª–µ
- **–ö—Ç–æ –º–æ–∂–µ—Ç –≤—ã–¥–∞—Ç—å**: –¢–æ–ª—å–∫–æ DIRECTOR –∫–æ–º–ø–∞–Ω–∏–∏
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: –ê–≤—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫–æ–º–ø–∞–Ω–∏–∏ (companyId != null)
- **–í–∞–∂–Ω–æ**: –ù–ï –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–∞–≤–æ —É–¥–∞–ª—è—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å

**–ß—Ç–æ –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- –ú–∞—Ä–∫–∞, –º–æ–¥–µ–ª—å, –≥–æ–¥ –≤—ã–ø—É—Å–∫–∞, —Ü–≤–µ—Ç
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (VIN, –≥–æ—Å–Ω–æ–º–µ—Ä, –ø—Ä–æ–±–µ–≥)
- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
- –û–ø–∏—Å–∞–Ω–∏–µ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –¢–∞—Ä–∏—Ñ—ã –∏ —Ü–µ–Ω—ã –∞—Ä–µ–Ω–¥—ã
- –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ

**–ß—Ç–æ –ù–ï–õ–¨–ó–Ø —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- ‚ùå –°—Ç–∞—Ç—É—Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (–≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π)
- ‚ùå –£–¥–∞–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
- ‚ùå –ò—Å—Ç–æ—Ä–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π

### 3. canBook - –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–π –±—Ä–æ–Ω–∏ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- **–ö—Ç–æ –º–æ–∂–µ—Ç –≤—ã–¥–∞—Ç—å**: –¢–æ–ª—å–∫–æ DIRECTOR –∫–æ–º–ø–∞–Ω–∏–∏
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: –ê–≤—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫–æ–º–ø–∞–Ω–∏–∏
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –î–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –¥–æ–≤–µ—Ä–µ–Ω–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### 4. canOrder - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç—Ä–µ–±—É—é—â–∏—Ö –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- **–ö—Ç–æ –º–æ–∂–µ—Ç –≤—ã–¥–∞—Ç—å**: –¢–æ–ª—å–∫–æ DIRECTOR –∫–æ–º–ø–∞–Ω–∏–∏
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: –ê–≤—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫–æ–º–ø–∞–Ω–∏–∏
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –î–ª—è –º–ª–∞–¥—à–∏—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, —á—å–∏ –∑–∞—è–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ä—à–∏–π –ø–µ—Ä—Å–æ–Ω–∞–ª

### 5. canConfirm - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–∂–∏—Ö –∑–∞—è–≤–æ–∫
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (order ‚Üí booking), —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–∂–∏—Ö –∑–∞—è–≤–æ–∫ –∏ –±—Ä–æ–Ω–µ–π
- **–ö—Ç–æ –º–æ–∂–µ—Ç –≤—ã–¥–∞—Ç—å**: –¢–æ–ª—å–∫–æ DIRECTOR –∫–æ–º–ø–∞–Ω–∏–∏
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: –ê–≤—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫–æ–º–ø–∞–Ω–∏–∏
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –î–ª—è —Å—Ç–∞—Ä—à–∏—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **–í–∞–∂–Ω–æ**: –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –í–°–ï–ì–î–ê –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –°–í–û–ò –∑–∞—è–≤–∫–∏ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ —ç—Ç–æ–≥–æ –ø—Ä–∞–≤–∞

### 6. canHandover - –í—ã–¥–∞—á–∞ –∏ –ø—Ä–∏–µ–º–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –í—ã–¥–∞—á–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∫–ª–∏–µ–Ω—Ç—É (–Ω–∞—á–∞–ª–æ –∞—Ä–µ–Ω–¥—ã) –∏ –ø—Ä–∏–µ–º–∫–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ (–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞—Ä–µ–Ω–¥—ã)
- **–ö—Ç–æ –º–æ–∂–µ—Ç –≤—ã–¥–∞—Ç—å**: –¢–æ–ª—å–∫–æ DIRECTOR –∫–æ–º–ø–∞–Ω–∏–∏
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: –ê–≤—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫–æ–º–ø–∞–Ω–∏–∏
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –î–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –Ω–∞ —Ç–æ—á–∫–µ –≤—ã–¥–∞—á–∏/–ø—Ä–∏–µ–º–∫–∏
- **–í–∞–∂–Ω–æ**: –≠—Ç–æ –æ–¥–Ω–æ –ø—Ä–∞–≤–æ –¥–ª—è –æ–±–µ–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–≤—ã–¥–∞—á–∏ –∏ –ø—Ä–∏–µ–º–∫–∏)

## ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π

**–û—Ç–¥–µ–ª—å–Ω–æ –æ—Ç car_permissions:**
- **–í–ª–∞–¥–µ–ª–µ—Ü –≥–∞—Ä–∞–∂–∞** –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –≤ —Å–≤–æ–µ–º –≥–∞—Ä–∞–∂–µ (PersonalGarage)
- **DIRECTOR –∫–æ–º–ø–∞–Ω–∏–∏** –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –∫–æ–º–ø–∞–Ω–∏–∏ (CompanyGarage)
- **canEditCar –ù–ï –¥–∞–µ—Ç –ø—Ä–∞–≤–æ** —É–¥–∞–ª—è—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ - —ç—Ç–æ –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è

## üîÑ –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Book –∏ Order

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Book (–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ) | Order (–∑–∞—è–≤–∫–∞) |
|----------|---------------------|----------------|
| –°—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ | –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è |
| –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π | –ù–µ—Ç | –î–∞ (canConfirm) |
| –£—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è | –í—ã—Å–æ–∫–∏–π | –°—Ä–µ–¥–Ω–∏–π/–ù–∏–∑–∫–∏–π |
| –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ | –û–ø—ã—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã | –ù–æ–≤—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã |

## ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–∏—Ö –∑–∞—è–≤–æ–∫ –∏ –±—Ä–æ–Ω–µ–π

**–í–∞–∂–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ**: –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –í–°–ï–ì–î–ê –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –°–í–û–ò –∑–∞—è–≤–∫–∏ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∞–≤.

- **–°–≤–æ–∏ –∑–∞—è–≤–∫–∏/–±—Ä–æ–Ω–∏**: —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è —Å–æ–∑–¥–∞—Ç–µ–ª–µ–º –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- **–ß—É–∂–∏–µ –∑–∞—è–≤–∫–∏/–±—Ä–æ–Ω–∏**: —Ç—Ä–µ–±—É—é—Ç –ø—Ä–∞–≤–æ `canConfirm`

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –æ—à–∏–±–∫–∏ –≤ —Å–≤–æ–∏—Ö –∑–∞—è–≤–∫–∞—Ö, –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—è –ø—Ä–∞–≤–∞ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–∂–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

## üìù –ü—Ä–∞–≤–∏–ª–∞ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –í–ª–∞–¥–µ–ª–µ—Ü –≥–∞—Ä–∞–∂–∞/–∫–æ–º–ø–∞–Ω–∏–∏ –º–æ–∂–µ—Ç –≤—ã–¥–∞—Ç—å:
‚úÖ `canView` - –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è

### DIRECTOR –∫–æ–º–ø–∞–Ω–∏–∏ –º–æ–∂–µ—Ç –≤—ã–¥–∞—Ç—å:
‚úÖ `canView` - –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥—Ä—É–∑–∫–∏  
‚úÖ `canEditCar` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–ë–ï–ó —É–¥–∞–ª–µ–Ω–∏—è)  
‚úÖ `canBook` - —Å–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π  
‚úÖ `canOrder` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫  
‚úÖ `canConfirm` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á—É–∂–∏—Ö –∑–∞—è–≤–æ–∫  
‚úÖ `canHandover` - –≤—ã–¥–∞—á–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∫–ª–∏–µ–Ω—Ç—É  
‚úÖ `canReceive` - –ø—Ä–∏–µ–º–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞

**–í–∞–∂–Ω–æ**: –î–ª—è –≤—ã–¥–∞—á–∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø—Ä–∞–≤ (–∫—Ä–æ–º–µ canView) –∞–≤—Ç–æ–º–æ–±–∏–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `companyId`).

## üí° –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞–ª–µ–Ω–¥–∞—Ä—è –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞
```dart
// –ò–Ω–≤–µ—Å—Ç–æ—Ä –¥–µ–ª–∏—Ç—Å—è –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º
await AccessControl.grantViewPermission(
  granterId: investorId,
  userId: partnerId,
  car: car,
);
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ú–ª–∞–¥—à–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä —Å–æ–∑–¥–∞–µ—Ç –∑–∞—è–≤–∫–∏
```dart
// DIRECTOR –¥–∞–µ—Ç –ø—Ä–∞–≤–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏
final permissions = CarPermissions(
  userId: juniorManagerId,
  carId: carId,
  canView: true,      // –í–∏–¥–∏—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—å
  canEditCar: false,  // –ù–µ –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
  canBook: false,     // –ù–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä—è–º—ã–µ –±—Ä–æ–Ω–∏
  canOrder: true,     // –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏
  canConfirm: false,  // –ù–µ –º–æ–∂–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å
  grantedBy: directorId,
  grantedAt: DateTime.now(),
);
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°—Ç–∞—Ä—à–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä —Å –ø–æ–ª–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
```dart
// DIRECTOR –¥–∞–µ—Ç –ø–æ–ª–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞
final permissions = CarPermissions(
  userId: seniorManagerId,
  carId: carId,
  canView: true,
  canEditCar: true,   // –ú–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
  canBook: true,      // –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä—è–º—ã–µ –±—Ä–æ–Ω–∏
  canOrder: true,     // –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏
  canConfirm: true,   // –ú–æ–∂–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å –∑–∞—è–≤–∫–∏ –¥—Ä—É–≥–∏—Ö
  canHandover: true,  // –ú–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∞–≤—Ç–æ
  grantedBy: directorId,
  grantedAt: DateTime.now(),
);
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–∞ —Ç–æ—á–∫–µ –≤—ã–¥–∞—á–∏/–ø—Ä–∏–µ–º–∫–∏
```dart
// DIRECTOR –¥–∞–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–¥–∞—á—É –∏ –ø—Ä–∏–µ–º–∫—É –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
final permissions = CarPermissions(
  userId: frontDeskManagerId,
  carId: carId,
  canView: true,
  canEditCar: false,
  canBook: false,
  canOrder: false,
  canConfirm: false,
  canHandover: true,  // –ú–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∞–≤—Ç–æ
  grantedBy: directorId,
  grantedAt: DateTime.now(),
);
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–∏—Ö –∑–∞—è–≤–æ–∫
```dart
// –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–æ–∑–¥–∞–ª –∑–∞—è–≤–∫—É
await rentalService.createOrder(
  managerId: juniorManagerId,
  carId: carId,
  clientId: clientId,
  // ...
);

// –ú–µ–Ω–µ–¥–∂–µ—Ä –º–æ–∂–µ—Ç –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –°–í–û–Æ –∑–∞—è–≤–∫—É –±–µ–∑ –ø—Ä–∞–≤–∞ canConfirm
// –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ rental.rentalUserId == currentUserId

// –ù–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ß–£–ñ–û–ô –∑–∞—è–≤–∫–∏ –Ω—É–∂–Ω–æ –ø—Ä–∞–≤–æ canConfirm
final canEditOthers = await AccessControl.canEditRental(
  seniorManagerId,
  rental,  // rental.rentalUserId != seniorManagerId
  GlobalRole.manager,
);
// canEditOthers –±—É–¥–µ—Ç true —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É seniorManager –µ—Å—Ç—å canConfirm
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤

```dart
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–æ –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä
final canView = await AccessControl.canViewCar(userId, car, userRole);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–æ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
final canEdit = await AccessControl.canEditCar(userId, car, userRole);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–æ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
final canBook = await AccessControl.canBookCar(userId, car, userRole);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–æ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫
final canOrder = await AccessControl.canCreateOrder(userId, car, userRole);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–æ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
final canConfirm = await AccessControl.canConfirmAndEditBookings(userId, car, userRole);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–æ –Ω–∞ –≤—ã–¥–∞—á—É –∏ –ø—Ä–∏–µ–º–∫—É –∞–≤—Ç–æ–º–æ–±–∏–ª—è
final canHandover = await AccessControl.canHandoverCar(userId, car, userRole);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–æ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—Ä–æ–Ω–∏ (—Å–≤–æ–µ–π –∏–ª–∏ —á—É–∂–æ–π)
final canEditRental = await AccessControl.canEditRental(userId, rental, userRole);
```

### –í—ã–¥–∞—á–∞ –ø—Ä–∞–≤

```dart
// –í–ª–∞–¥–µ–ª–µ—Ü –≥–∞—Ä–∞–∂–∞ –≤—ã–¥–∞–µ—Ç –ø—Ä–∞–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
await AccessControl.grantViewPermission(
  granterId: garageOwnerId,
  userId: anyUserId,
  car: car,
);

// DIRECTOR –≤—ã–¥–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞
await AccessControl.grantCarPermissions(
  granterId: directorId,
  granterRole: GlobalRole.director,
  managerId: managerId,
  car: car,
  permissions: permissions,
);
```

### –û—Ç–∑—ã–≤ –ø—Ä–∞–≤

```dart
await AccessControl.revokeCarPermissions(
  revokerId: directorId,
  revokerRole: GlobalRole.director,
  managerId: managerId,
  car: car,
);
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ Firestore

```
cars/{carId}/permissions/{userId}
  - user_id: string
  - car_id: string
  - can_view: boolean
  - can_edit_car: boolean
  - can_book: boolean
  - can_order: boolean
  - can_confirm: boolean
  - can_handover: boolean
  - granted_by: string
  - granted_at: timestamp
```

### –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

```dart
class CarPermissions {
  final String userId;
  final String carId;
  final bool canView;      // –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥—Ä—É–∑–∫–∏
  final bool canEditCar;   // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ë–ï–ó —É–¥–∞–ª–µ–Ω–∏—è)
  final bool canBook;      // –ü—Ä—è–º–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
  final bool canOrder;     // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫
  final bool canConfirm;   // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á—É–∂–∏—Ö –∑–∞—è–≤–æ–∫
  final bool canHandover;  // –í—ã–¥–∞—á–∞ –∏ –ø—Ä–∏–µ–º–∫–∞ –∞–≤—Ç–æ
  final DateTime grantedAt;
  final String grantedBy;
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ü–µ—Ä–µ–¥–∞—á–∞ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏**: –î–ª—è –≤—ã–¥–∞—á–∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø—Ä–∞–≤ (–∫—Ä–æ–º–µ canView) –∞–≤—Ç–æ–º–æ–±–∏–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `companyId`

2. **–¢–æ–ª—å–∫–æ DIRECTOR**: –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ –º–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ä–æ–ª—å—é `GlobalRole.director`

3. **–°–≤–æ—è –∫–æ–º–ø–∞–Ω–∏—è**: DIRECTOR –º–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –ø—Ä–∞–≤–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ —Å–≤–æ–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ (car.companyId == director.companyId)

4. **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è canView**: –ü—Ä–∞–≤–æ `canView` –º–æ–∂–µ—Ç –≤—ã–¥–∞—Ç—å –≤–ª–∞–¥–µ–ª–µ—Ü –≥–∞—Ä–∞–∂–∞ –ª—é–±–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –±–µ–∑ –ø–µ—Ä–µ–¥–∞—á–∏ –∞–≤—Ç–æ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏

5. **canEditCar ‚â† —É–¥–∞–ª–µ–Ω–∏–µ**: –ü—Ä–∞–≤–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ù–ï –≤–∫–ª—é—á–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π. –£–¥–∞–ª—è—Ç—å –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ:
   - –í–ª–∞–¥–µ–ª–µ—Ü –≥–∞—Ä–∞–∂–∞ (—Å–≤–æ–∏ –∞–≤—Ç–æ)
   - DIRECTOR –∫–æ–º–ø–∞–Ω–∏–∏ (–∞–≤—Ç–æ –∫–æ–º–ø–∞–Ω–∏–∏)

6. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–∏—Ö –∑–∞—è–≤–æ–∫**: –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –í–°–ï–ì–î–ê –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∑–∞—è–≤–∫–∏ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ –ø—Ä–∞–≤–∞ `canConfirm`. –≠—Ç–æ –ø—Ä–∞–≤–æ –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ß–£–ñ–ò–• –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

7. **–í—ã–¥–∞—á–∞ –∏ –ø—Ä–∏–µ–º–∫–∞**: –ü—Ä–∞–≤–æ `canHandover` - —ç—Ç–æ –æ–¥–Ω–æ –ø—Ä–∞–≤–æ –¥–ª—è –æ–±–µ–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–≤—ã–¥–∞—á–∏ –∏ –ø—Ä–∏–µ–º–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è).

8. **–ù–µ—Ç "–º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∫–æ–º–ø–∞–Ω–∏–∏"**: –í—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Ä–∞–≤–Ω—ã, –æ–Ω–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞–±–æ—Ä–æ–º –ø—Ä–∞–≤ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏.
